
<div class="container">
    <div class="row pb-1" id="latest-publications-row"></div>
</div>

<script>
var papers = {"papers": [
 {
    "title": "Uncovering broad macroecological patterns by comparing the shape of species' distributions along environmental gradients",
    "authors": ["Bernat Bramon Mora", "Antoine Guisan", "Jake M. Alexander"],
    "journal": "The American Naturalist",
    "date": "August 2023",
    "vol": "203",
    "pages": "000--000",
    "doi": "https://doi.org/10.1086/727518",
    "localFileName": "AmNat2023",
    "oa": false,
    "published": true
 },
 {
    "title": "Positive species interactions shape species' range limits",
    "authors": ["Pauline Stephan", "Bernat Bramon Mora", "Jake M. Alexander"],
    "journal": "Oikos",
    "date": "June 2021",
    "vol": "130",
    "pages": "1611--1833",
    "doi": "https://doi.org/10.1111/oik.08146",
    "localFileName": "Oikos2021",
    "oa": true,
    "published": true
  },
  {
    "title": "Assessing unintended human‐mediated dispersal using visitation networks",
    "authors": ["Rogini Runghen", "Bernat Bramon Mora", "Antonia Godoy-Lorite", "Daniel B. Stouffer"],
    "journal": "Journal of Applied Ecology",
    "date": "Feb 2021",
    "vol": "58",
    "pages": "777--788",
    "doi": "https://doi.org/10.1111/1365-2664.13829",
    "localFileName": "JAE2021",
    "oa": true,
    "published": true
 },
  {
    "title": "Untangling the seasonal dynamics of plant-pollinator communities",
    "authors": ["Bernat Bramon Mora", "Eura Shin", "Paul J. CaraDonna", "Daniel B. Stouffer"],
    "journal": "Nature Communications",
    "date": "Aug 2020",
    "vol": "11",
    "pages": "4086",
    "doi": "https://doi.org/10.1038/s41467-020-17894-y",
    "localFileName": "NatComm2020",
    "oa": true,
    "published": true
  },
  {
    "title": "Unmasking structural patterns in incidence matrices: an application to ecological data",
    "authors": ["Bernat Bramon Mora", "Giulio V. Dalla Riva", "Daniel B. Stouffer"],
    "journal": "Journal of the Royal Society Interface",
    "date": "Feb 2019",
    "vol": "16",
    "pages": "20180747",
    "doi": "https://doi.org/10.1098/rsif.2018.0747",
    "localFileName": "JRI2019",
    "oa": true,
    "published": true
  },
  {
    "title": "pymfinder: a tool for the motif analysis of binary and quantitative complex networks",
    "authors": ["Bernat Bramon Mora", "Alyssa R. Cirtwill", "Daniel B. Stouffer"],
    "journal": "bioRxiv",
    "date": "Sep 2018",
    "vol": "-",
    "pages": "-",
    "doi": "https://doi.org/10.1101/364703",
    "localFileName": "pymfinder2018",
    "oa": true,
    "published": true
  },
  {
    "title": "Seeing the forest for the trees: putting multilayer networks to work for community ecology",
    "authors": ["Matthew C. Hutchinson", "Bernat Bramon Mora", "Shai Pilosof", "Allison K. Barner", "Sonia Kéfi", "Elisa Thébault", "Pedro Jordano", "Daniel B. Stouffer"],
    "journal": "Functional Ecology",
    "date": "Nov 2018",
    "vol": "33",
    "pages": "206--217",
    "doi": "https://doi.org/10.1111/1365-2435.13237",
    "localFileName": "FunEco2018",
    "oa": true,
    "published": true
  },
  {
    "title": "Identifying a common backbone of interactions underlying food webs from different ecosystems",
    "authors": ["Bernat Bramon Mora", "Dominique Gravel", "Luis J. Gilarranz", "Timothée Poisot", "Daniel B. Stouffer"],
    "journal": "Nature Communications",
    "date": "July 2018",
    "vol": "9",
    "pages": "2603",
    "doi": "https://doi.org/10.1038/s41467-018-05056-0",
    "localFileName": "NatComm2018",
    "oa": true,
    "published": true
  }
]}

function boldIfBernat(thisAuthor){
  if (thisAuthor == "Bernat Bramon Mora"){
    return "<b>" + thisAuthor + "</b>"
  } else{
    return thisAuthor
  }
}

function formatAuthors(authors){
  for (var i = 0; i < authors.length; i++){
    authors[i] = boldIfBernat(authors[i])
  }
  return authors.join(", ")  
}

function formatJournal(paper){
  var formatedName = "<em>" + paper.date + ". " + "<b>" + paper.journal + "</b>" + ". " + paper.vol + ", " + paper.pages + "</em>"
  return formatedName
}

function createPaper(paper){
  // Create parent column
  var thisPaper = document.createElement("div")
  thisPaper.classList.add("col-sm-12")
  thisPaper.classList.add("my-3")
  thisPaper.classList.add("px-4")
  // Create internal row
  var paperIntRow = document.createElement("div")
  paperIntRow.classList.add("row")
  // Create column for thumbnail
  var thumbnailCol = document.createElement("div")
  thumbnailCol.classList.add("col-sm-5")
  thumbnailCol.classList.add("d-none")
  thumbnailCol.classList.add("d-sm-block")
  thumbnailCol.classList.add("d-md-block")
  thumbnailCol.classList.add("d-lg-block")
  // Create thumbnail
  var pdfLink = document.createElement("a")
  if(paper.published){
      if(paper.oa){
          pdfLink.setAttribute("href", "publications/" + paper.localFileName + ".pdf");
          pdfLink.setAttribute("target", "_blank");
      }else{
          pdfLink.setAttribute("href", paper.doi);
          pdfLink.setAttribute("target", "_blank");
      }
  }else{
      pdfLink.setAttribute("href", "javascript:void(0);");
      pdfLink.setAttribute("target", "_blank");
  }
  
  var thumbnail = document.createElement("img");
  thumbnail.setAttribute("src", "publications/thumbnails/" + paper.localFileName + ".png");
  thumbnail.setAttribute("alt", paper.title);
  thumbnail.classList.add("img-fluid");
  thumbnail.classList.add("img-thumbnail");
  thumbnail.setAttribute('target', '_blank');
  if(!paper.published){
      thumbnail.classList.add("disabled");
  }
  // Create description column
  var descColumn = document.createElement("div")
  descColumn.classList.add("col-sm-7")
  descColumn.classList.add("col-md-7")
  descColumn.classList.add("col-lg-7")
  descColumn.classList.add("petit")
  // Create title
  var paperTitle = document.createElement("h3")
  paperTitle.classList.add("gran")
  if(paper.oa){
    var thisTitle = paper.title + " <i class='ai ai-open-access'></i>"
  } else {
    var thisTitle = paper.title
  }
  paperTitle.innerHTML = thisTitle
  // Create author list
  var authorsP = document.createElement("p")
  authorsP.innerHTML = formatAuthors(paper.authors)
  authorsP.classList.add("petit")
  // Create journal details
  var journalP = document.createElement("p")
  journalP.innerHTML = formatJournal(paper)
  journalP.classList.add("petit")
  // doi
  var doiP = document.createElement("p")
  doiP.classList.add("petit")
  doiP.classList.add("small")
  var doiLink = document.createElement("a")
  doiLink.setAttribute("href", paper.doi)
  doiLink.setAttribute("rel", "external")
  doiLink.setAttribute("target", "_blank")
  doiLink.innerHTML = "<i class='ai ai-doi ai-2x' style='vertical-align:middle;'></i> " + paper.doi.substr(16)
  doiP.appendChild(doiLink)
  
  // Apend objects first image then description then overall
  var thumbnailLink = pdfLink.cloneNode(true)
  thumbnailLink.appendChild(thumbnail)
  thumbnailCol.appendChild(thumbnailLink)

  paperIntRow.appendChild(thumbnailCol)

  var titleLink = pdfLink.cloneNode(true)
  titleLink.appendChild(paperTitle)
  if(!paper.published){
      titleLink.classList.add("disabled");
  }
  descColumn.appendChild(titleLink)
  descColumn.appendChild(authorsP)
  descColumn.appendChild(journalP)
  if(paper.published){
      descColumn.appendChild(doiP)
  }
  
  paperIntRow.appendChild(descColumn)
  thisPaper.appendChild(paperIntRow)

  return thisPaper
}

// Fill in papers
for (var i = 0; i < papers.papers.length; i++) {
    document.getElementById("latest-publications-row").appendChild(createPaper(papers.papers[i]))
}
</script>




